apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "customer.fullname" . }}
  labels:
    {{- include "customer.labels" . | nindent 4 }}
data:
  # gRPC server bind address
  GRPC_TRANSPORT_HOST: {{ .Values.config.grpc.host | quote }}
  GRPC_TRANSPORT_PORT: {{ .Values.config.grpc.port | quote }}
  GRPC_OTEL_SERVER_HOSTNAME: {{ .Values.config.grpc.otel.serverHostname | quote }}

  # Logging
  LOG_LEVEL: {{ .Values.config.log.level | quote }}

  # OpenTelemetry
  OTEL_HOST: {{ .Values.otel.host | quote }}
  OTEL_SERVICE_NAME: {{ .Values.otel.serviceName | quote }}

  # PostgreSQL (non-sensitive)
  POSTGRES_HOST: {{ .Values.postgres.host | quote }}
  POSTGRES_PORT: {{ .Values.postgres.port | quote }}
  POSTGRES_DATABASE: {{ .Values.postgres.database | quote }}
  POSTGRES_USERNAME: {{ .Values.postgres.username | quote }}

  # Valkey
  VALKEY_HOST: {{ .Values.valkey.host | quote }}
  VALKEY_PORT: {{ .Values.valkey.port | quote }}
  VALKEY_KEY_PREFIX: {{ .Values.valkey.keyPrefix | quote }}

  # Kafka
  KAFKA_HOST: {{ .Values.kafka.host | quote }}
  KAFKA_PORT: {{ .Values.kafka.port | quote }}
  KAFKA_TOPIC_PREFIX: {{ .Values.kafka.topicPrefix | quote }}
