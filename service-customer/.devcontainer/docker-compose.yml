services:
  service:
    image: swift:6.2
    volumes:
      - ..:/workspace:cached
    command: sleep infinity
    networks:
      - everything-network
      - everything-customer-network
    privileged: true
  cache:
    image: valkey/valkey:9-alpine
    volumes:
      - cache-data:/data
    # ports:
    #   - "6379:6379"
    networks:
      - everything-customer-network
  db:
    image: postgres:18-alpine
    environment:
      POSTGRES_DB: customer
      POSTGRES_USER: customer
      POSTGRES_PASSWORD: password
    # ports:
    #   - "5432:5432"
    volumes:
      - db-data:/var/lib/postgresql/data
    networks:
      - everything-customer-network

networks:
  everything-network:
    external: true
    name: everything-network
  everything-customer-network:
    driver: bridge
    name: everything-customer-network

volumes:
  db-data:
  cache-data:
